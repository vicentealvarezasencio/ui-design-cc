---
name: ui:init
description: Initialize UI design context for a project
allowed-tools: [Read, Write, Edit, AskUserQuestion, Glob, Grep, WebFetch, Task]
agent: ui-researcher
---

<objective>
Establish foundational UI context for the project. Discover platform, framework, constraints, and gather inspiration. Creates UI-CONTEXT.md as the starting point for all UI design work.
</objective>

<context>
@~/.claude/ui-design/references/design-systems.md
@.planning/PROJECT.md (if exists)
@.planning/REQUIREMENTS.md (if exists)
</context>

<ux_principles>
## Interactive Questioning

Every question must offer:
1. **Specific options** — Common choices relevant to the question
2. **"You decide"** — Let Claude choose smart defaults based on context
3. **Free text (Other)** — Always available via the AskUserQuestion tool

Questions are **adaptive**:
- Ask as many as needed based on context
- Skip questions when answers can be inferred
- Probe deeper when complexity is detected
</ux_principles>

<process>

<step name="detect_context">
## Automatic Context Detection

Before asking questions, analyze:

1. **Check for existing files:**
   - package.json → Detect framework (Next.js, React, Vue, etc.)
   - Podfile/Package.swift → iOS project
   - build.gradle → Android project
   - pubspec.yaml → Flutter project
   - Cargo.toml, go.mod, etc. → Backend (may have frontend)

2. **Check for existing UI code:**
   - src/components/, components/ → Existing component structure
   - styles/, css/, scss/ → Styling approach
   - tailwind.config.* → Tailwind CSS
   - .storybook/ → Component documentation exists

3. **Check for existing design files:**
   - .planning/design-tokens.json → Tokens already defined
   - .planning/UI-SPEC.md → Specs already started
   - figma-tokens.json, tokens.json → Design system exists

4. **Check GSD context:**
   - .planning/PROJECT.md → Project already defined
   - .planning/REQUIREMENTS.md → Requirements exist

Report what was detected before asking questions.
</step>

<step name="platform_discovery">
## Platform Discovery

If not detected automatically, ask:

**Question: What are we building?**

Options:
- Web application (browser-based)
- iOS app (native Swift/SwiftUI)
- Android app (native Kotlin)
- Cross-platform mobile (React Native / Flutter)
- Desktop application (Electron / Tauri)
- You decide based on context

For web, follow up with framework if not detected:
- Next.js / React
- Vue / Nuxt
- Svelte / SvelteKit
- Plain HTML/CSS/JS
- Other (specify)
</step>

<step name="design_context">
## Design Context Discovery

**Question: Any design references or inspiration?**

Options:
- "Like [Product name]" — Will analyze the product's design
- URL to reference site — Will fetch and analyze
- Existing brand guidelines — Point to files
- Start fresh — No specific inspiration
- You decide — Use modern defaults

If user provides inspiration:
- Spawn UI Researcher agent if complex
- Analyze visual patterns
- Extract color direction
- Note typography and spacing
- Document in UI-INSPIRATION.md
</step>

<step name="constraints_discovery">
## Constraints Discovery

**Question: Any specific constraints?**

Options (multi-select):
- Must match existing brand colors
- Accessibility requirements (WCAG AA/AAA)
- Must work with existing component library
- Performance budget (lightweight)
- Must support dark mode
- Must support RTL languages
- No specific constraints
- You decide reasonable defaults

For each selected, ask follow-up if needed:
- Brand colors → What are they?
- Accessibility → AA or AAA?
- Component library → Which one?
</step>

<step name="users_discovery">
## User Context

**Question: Who are the primary users?**

Options:
- General consumers (B2C)
- Business professionals (B2B)
- Internal team (Enterprise)
- Developers/Technical users
- Mixed audience
- You decide based on project type

Follow-up:
- Device expectations (mobile-first, desktop-first, both)
- Technical sophistication (affects UI complexity)
</step>

<step name="spawn_researcher">
## Deep Research (If Needed)

Spawn UI Researcher agent when:
- User provided "like [Product]" inspiration
- URL analysis needed
- Existing codebase has components to analyze
- Complex requirements need interpretation

Provide researcher with:
- Detected context
- User responses
- Specific research questions
</step>

<step name="write_context">
## Write UI-CONTEXT.md

Create `.planning/UI-CONTEXT.md`:

```markdown
# UI Context

Last updated: [date]
Generated by: /ui:init

## Platform
- **Type:** [web/iOS/Android/cross-platform/desktop]
- **Framework:** [detected or specified]
- **Primary viewport:** [mobile-first/desktop-first/responsive]

## Tech Stack
- **Component library:** [if any]
- **Styling:** [Tailwind/CSS Modules/styled-components/etc]
- **State management:** [if detected]

## Existing Design System
- **Status:** [none/partial/complete]
- **Tokens:** [path if exists]
- **Components:** [count if detected]

## Constraints
- **Accessibility:** [WCAG level]
- **Brand:** [guidelines or "none"]
- **Dark mode:** [required/optional/no]
- **RTL:** [required/no]
- **Performance:** [notes]

## Users
- **Primary audience:** [description]
- **Device focus:** [mobile/desktop/both]
- **Technical level:** [low/medium/high]

## Inspiration
- **References:** [list or "none"]
- **Direction:** [modern minimal/bold/playful/etc]
- **See:** UI-INSPIRATION.md (if created)

## Integration
- **GSD:** [yes - linked to PROJECT.md / no - standalone]
- **Requirements:** [path if exists]
```
</step>

<step name="initialize_state">
## Initialize State Files

Create `.planning/ui-state/` directory and initialize:

**coordinator-state.json:**
```json
{
  "last_run": "[timestamp]",
  "project_status": {
    "phase": "initialized",
    "tokens_defined": false,
    "screens_total": 0,
    "screens_specified": 0,
    "components_total": 0,
    "components_specified": 0
  },
  "agent_sessions": {
    "researcher": { "last_run": "[timestamp]", "status": "complete" }
  }
}
```
</step>

<step name="completion">
## Completion Summary

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 UI ► PROJECT INITIALIZED
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Platform:     [type] ([framework])
Styling:      [approach]
Constraints:  [summary]
Users:        [audience]
Inspiration:  [summary or "None specified"]

Files Created:
  ✓ .planning/UI-CONTEXT.md
  ✓ .planning/ui-state/coordinator-state.json
  [✓ .planning/UI-INSPIRATION.md (if applicable)]

───────────────────────────────────────────────────────

## ▶ Next Up

**Set up design tokens** — Define colors, typography, spacing

`/ui:setup-tokens`

Or if you have requirements:

`/ui:design-screens` — Jump straight to screen specs

───────────────────────────────────────────────────────
```
</step>

</process>

<success_criteria>
- `.planning/UI-CONTEXT.md` created with platform/framework/constraints
- State files initialized in `.planning/ui-state/`
- User preferences documented
- Inspiration analyzed (if provided)
- Clear next step recommended
</success_criteria>
